<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Heart Rate Analysis</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div class="container header-container">
        <h1>Does Heart Rate Increase with Greater Cognitive and Physical Load?</h1>
        <nav>
          <ul>
            <li><a href="#visualization">Visualization</a></li>
            <li><a href="#writeup">Write-Up</a></li>
          </ul>
        </nav>
        <button id="toggle-theme" aria-label="Toggle Light/Dark Mode">Toggle Theme</button>
      </div>
    </header>
    <main>
      <section id="visualization" class="section">
        <div class="container flex-container">
          <div id="viz-container">
            <div id="plot"></div>
          </div>
          <div id="legend">
            <h3>Activity Colors</h3>
            <label><input type="checkbox" class="activity-checkbox" value="Rest" checked> Rest</label>
            <label><input type="checkbox" class="activity-checkbox" value="2-Back" checked> 2‑Back</label>
            <label><input type="checkbox" class="activity-checkbox" value="Walking" checked> Walking</label>
            <label><input type="checkbox" class="activity-checkbox" value="Running" checked> Running</label>
            <hr />
            <h3>Measures</h3>
            <label><input type="checkbox" class="measure-checkbox" value="heart_rate" checked> Heart Rate</label>
            <label><input type="checkbox" class="measure-checkbox" value="breathing_rate" checked> Breathing Rate</label>
            <hr />
            <h3>Regression Lines</h3>
            <label><input type="checkbox" class="regression-checkbox" value="regression"> Show Regression Lines</label>
          </div>
        </div>
        <!-- Legend Toggle Button (positioned above the legend) -->
        <button id="legend-toggle" aria-label="Toggle Legend">Hide Legend</button>
        <!-- Button Container -->
        <div class="button-container">
          <!-- The heart button is used for both the intro game and pumping points -->
          <button id="heart-button" aria-label="Continue"><span>❤</span></button>
          <!-- Narrative Container -->
          <section id="narrative" class="section">
            <div class="container"></div>
          </section>
          <!-- Slider (and its label) for adjusting points; hidden until interactive mode -->
          <label id="slider-label" for="points-slider">Points to add: <span id="slider-value">100</span></label>
          <input type="range" id="points-slider" min="-500" max="500" step="10" value="100">
          <!-- Skip Animation Button -->
          <button id="skip-button">Skip Animation</button>
        </div>
      </section>
      <section id="writeup" class="section">
        <div class="container">
          <h2>Project Write-Up</h2>
          <p>
            <strong>Rationale:</strong> This visualization starts with an interactive intro game where you estimate heart beats (in BPM) for Rest, 2‑Back, and Running by clicking the heart over 5 seconds. After the intro, a narrative animation guides you into full interactive mode with tooltips, zoom/pan, regression lines, and query options.
          </p>
          <p>
            <strong>Development Process:</strong> Built solely with D3.js and vanilla JavaScript, this project demonstrates how to integrate data‐driven animations with interactive controls.
          </p>
        </div>
      </section>
    </main>
    <footer>
      <div class="container">
        <p>&copy; 2025 Heart Rate Analysis Project</p>
      </div>
    </footer>
    <!-- Include D3.js and our global script -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="global.js"></script>
  </body>
</html>
